<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daanbantayan Paradise - Tourist Booking Platform</title>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Navigation */
        nav {
            background: rgba(0, 123, 191, 0.95);
            backdrop-filter: blur(10px);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            transition: all 0.3s;
            padding: 0.5rem 1rem;
            border-radius: 20px;
        }

        .nav-links a:hover {
            color: #ffd700;
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .auth-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn {
            padding: 0.5rem 1.5rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            text-decoration: none;
            display: inline-block;
            font-size: 0.9rem;
        }

        .btn-primary {
            background: linear-gradient(45deg, #007bbf, #00a8ff);
            color: white;
        }

        .btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        .btn-tour-guide {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-primary:hover {
            background: linear-gradient(45deg, #005f99, #0088dd);
        }

        .btn-tour-guide:hover {
            background: linear-gradient(45deg, #1e7e34, #1b855d);
        }

        /* Hero Section */
        .hero {
            height: 100vh;
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), 
                        radial-gradient(circle at 30% 20%, rgba(0, 168, 255, 0.3) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(255, 215, 0, 0.2) 0%, transparent 50%),
                        linear-gradient(135deg, #007bbf 0%, #00a8ff 100%);
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800"><path fill="%23ffffff" opacity="0.03" d="M0,300 Q300,100 600,300 T1200,300 L1200,800 L0,800 Z"/><path fill="%23ffffff" opacity="0.05" d="M0,500 Q300,300 600,500 T1200,500 L1200,800 L0,800 Z"/></svg>');
            background-size: cover;
            pointer-events: none;
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero-content h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            animation: fadeInUp 1s ease;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .hero-content p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            animation: fadeInUp 1s ease 0.3s both;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-buttons {
            animation: fadeInUp 1s ease 0.6s both;
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .hero-buttons .btn {
            padding: 1rem 2rem;
            font-size: 1.1rem;
        }

        /* Search Section */
        .search-section {
            padding: 4rem 0;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .search-container {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-top: -5rem;
            position: relative;
            z-index: 100;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .search-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            align-items: end;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #333;
        }

        .form-group input, .form-group select, .form-group textarea {
            padding: 1rem;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            transition: all 0.3s;
            font-size: 1rem;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #007bbf;
            box-shadow: 0 0 0 3px rgba(0, 123, 191, 0.1);
            transform: translateY(-2px);
        }

        /* Available Bookings */
        .bookings-section {
            padding: 4rem 0;
        }

        .booking-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .booking-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .booking-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .booking-image {
            height: 220px;
            background: linear-gradient(135deg, #007bbf, #00a8ff);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            position: relative;
            overflow: hidden;
        }

        .booking-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px 10px 0 0;
        }

        .booking-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 200"><path fill="%23ffffff" opacity="0.1" d="M0,100 Q100,50 200,100 T400,100 L400,200 L0,200 Z"/></svg>');
            background-size: cover;
        }

        .booking-content {
            padding: 2rem;
        }

        .booking-title {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .booking-description {
            color: #666;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .booking-price {
            color: #007bbf;
            font-size: 1.8rem;
            font-weight: bold;
            margin: 1rem 0;
        }

        /* Map Section */
        .map-section {
            padding: 4rem 0;
            background: #f8f9fa;
        }

        #map {
            height: 500px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            z-index: 1;
        }

        .map-controls {
            margin-top: 1rem;
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .map-controls .btn {
            padding: 0.8rem 1.5rem;
        }

        /* Custom Leaflet Popup Styling */
        .leaflet-popup-content-wrapper {
            border-radius: 15px;
            padding: 0;
            overflow: hidden;
        }

        .leaflet-popup-content {
            margin: 0;
            width: 280px !important;
        }

        .popup-content {
            padding: 0;
        }

        .popup-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }

        .popup-info {
            padding: 1rem;
        }

        .popup-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #007bbf;
            margin-bottom: 0.5rem;
        }

        .popup-description {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.8rem;
            line-height: 1.4;
        }

        .popup-price {
            font-size: 1.3rem;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 0.8rem;
        }

        .popup-btn {
            width: 100%;
            padding: 0.6rem;
            background: linear-gradient(45deg, #007bbf, #00a8ff);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .popup-btn:hover {
            background: linear-gradient(45deg, #005f99, #0088dd);
            transform: translateY(-2px);
        }

        .user-location-marker {
            background-color: #4285f4;
            border: 3px solid white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        /* About Section */
        .about-section {
            padding: 4rem 0;
        }

        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .about-text h2 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: #007bbf;
            line-height: 1.2;
        }

        .about-text p {
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
            line-height: 1.7;
            color: #555;
        }

        .about-image {
            height: 400px;
            background: linear-gradient(135deg, #007bbf, #00a8ff);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            position: relative;
            overflow: hidden;
        }

        .about-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"><path fill="%23ffffff" opacity="0.1" d="M0,200 Q200,100 400,200 L400,400 L0,400 Z"/></svg>');
            background-size: cover;
        }

        /* Team Section */
        .team-section {
            padding: 4rem 0;
            background: #f8f9fa;
        }

        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .team-card {
            background: white;
            padding: 2.5rem;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .team-card:hover {
            transform: translateY(-5px);
        }

        .team-avatar {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #007bbf, #00a8ff);
            border-radius: 50%;
            margin: 0 auto 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .team-avatar-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }

        .team-avatar-placeholder {
            font-size: 2.5rem;
            line-height: 100px;
        }

        .team-card h3 {
            margin-bottom: 0.5rem;
            color: #333;
            font-size: 1.3rem;
        }

        .team-card p:first-of-type {
            color: #007bbf;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        /* Contact Section */
        .contact-section {
            padding: 4rem 0;
        }

        .contact-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
        }

        .contact-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .contact-form input,
        .contact-form textarea {
            padding: 1rem;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            transition: all 0.3s;
            font-family: inherit;
            font-size: 1rem;
        }

        .contact-form input:focus,
        .contact-form textarea:focus {
            outline: none;
            border-color: #007bbf;
            box-shadow: 0 0 0 3px rgba(0, 123, 191, 0.1);
        }

        .contact-info {
            background: linear-gradient(135deg, #007bbf, #00a8ff);
            color: white;
            padding: 2.5rem;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }

        .contact-info::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 400"><path fill="%23ffffff" opacity="0.1" d="M0,200 Q150,100 300,200 L300,400 L0,400 Z"/></svg>');
            background-size: cover;
        }

        .contact-info > * {
            position: relative;
            z-index: 2;
        }

        .contact-info h3 {
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }

        .contact-info p {
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 2.5rem;
            border-radius: 20px;
            max-width: 600px;
            position: relative;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .close {
            position: absolute;
            right: 1rem;
            top: 1rem;
            font-size: 2rem;
            cursor: pointer;
            color: #999;
            transition: color 0.3s;
        }

        .close:hover {
            color: #333;
        }

        .modal h2 {
            margin-bottom: 1.5rem;
            color: #333;
            text-align: center;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #007bbf;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 4px;
            background: linear-gradient(45deg, #007bbf, #00a8ff);
            border-radius: 2px;
        }

        .user-welcome {
            color: white;
            margin-right: 1rem;
            font-weight: 500;
        }

        /* Tour Guide Application Section */
        .tour-guide-section {
            padding: 4rem 0;
            background: #f8f9fa;
        }

        .tour-guide-container {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
        }

        .tour-guide-container a {
            text-decoration: none;
        }

        /* Toast Notification Styles */
        #toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 3000;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 350px;
        }

        .toast {
            padding: 1rem 1.5rem;
            border-radius: 10px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transform: translateX(100%);
            transition: transform 0.3s ease, opacity 0.3s ease;
            opacity: 0;
            min-height: 20px;
            display: flex;
            align-items: center;
        }

        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }

        .toast.success {
            background: linear-gradient(45deg, #28a745, #20c997);
        }

        .toast.error {
            background: linear-gradient(45deg, #dc3545, #c82333);
        }

        .toast.info {
            background: linear-gradient(45deg, #007bbf, #00a8ff);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 60px;
                left: 0;
                right: 0;
                background: rgba(0, 123, 191, 0.95);
                backdrop-filter: blur(10px);
                padding: 1rem;
                width: 100%;
            }

            .nav-links.active {
                display: flex;
            }
            
            .hero-content h1 {
                font-size: 2.5rem;
            }
            
            .about-content {
                grid-template-columns: 1fr;
            }
            
            .contact-content {
                grid-template-columns: 1fr;
            }

            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }

            .search-form {
                grid-template-columns: 1fr;
            }

            .booking-grid {
                grid-template-columns: 1fr;
            }

            #toast-container {
                right: 10px;
                left: 10px;
                top: 10px;
                max-width: none;
            }
        }

        @media (max-width: 480px) {
            .nav-container {
                padding: 1rem;
            }

            .hero-content h1 {
                font-size: 2rem;
            }

            .hero-content p {
                font-size: 1.1rem;
            }

            .section-title {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav id="navbar">
        <div class="nav-container">
            <div class="logo">Daanbantayan Paradise</div>
            <ul class="nav-links">
                <li><a href="#home" onclick="showSection('home')"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="#bookingsSection" onclick="showSection('bookings')"><i class="fas fa-calendar-check"></i> Bookings</a></li>
                <li><a href="#aboutSection" onclick="showSection('about')"><i class="fas fa-info-circle"></i> About</a></li>
                <li><a href="#teamSection" onclick="showSection('team')"><i class="fas fa-users"></i> Team</a></li>
                <li><a href="#contactSection" onclick="showSection('contact')"><i class="fas fa-envelope"></i> Contact</a></li>
            </ul>
            <div class="auth-buttons" id="authButtons">
                <a href="#" class="btn btn-secondary" onclick="showLogin()">Login</a>
                <a href="#" class="btn btn-primary" onclick="showRegister()">Sign Up</a>
                <a href="apply.html" class="btn btn-tour-guide" onclick="checkLogin()">Apply as Tour Guide</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="mainContent">
        <!-- Hero Section -->
        <section class="hero" id="heroSection">
            <div class="container">
                <div class="hero-content">
                    <h1>Discover Daanbantayan Paradise</h1>
                    <p>Experience the pristine beaches, crystal clear waters, and unforgettable adventures in Northern Cebu's tropical paradise</p>
                    <div class="hero-buttons">
                        <a href="#bookingsSection" class="btn btn-primary" onclick="showSection('bookings')">Book Your Adventure</a>
                        <a href="#aboutSection" class="btn btn-secondary" onclick="showSection('about')">Learn More</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Search Section -->
        <section class="search-section">
            <div class="container">
                <div class="search-container">
                    <h2 class="section-title">Find Your Perfect Experience</h2>
                    <form class="search-form">
                        <div class="form-group">
                            <label>Destination</label>
                            <select id="destination">
                                <option value="">All Destinations</option>
                                <option>Malapascua Island</option>
                                <option>Bantigue Cove</option>
                                <option>Carnaza Island</option>
                                <option>Paypay Beach</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Check-in</label>
                            <input type="date" id="checkin">
                        </div>
                        <div class="form-group">
                            <label>Check-out</label>
                            <input type="date" id="checkout">
                        </div>
                        <div class="form-group">
                            <label>Guests</label>
                            <select id="guests">
                                <option>1 Guest</option>
                                <option>2 Guests</option>
                                <option>3-4 Guests</option>
                                <option>5+ Guests</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <button type="button" class="btn btn-primary" onclick="searchBookings()">Search Adventures</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Available Bookings -->
        <section class="bookings-section" id="bookingsSection">
            <div class="container">
                <h2 class="section-title">Available Experiences</h2>
                <div class="booking-grid" id="bookingGrid">
                    <!-- Bookings will be populated here -->
                </div>
            </div>
        </section>

        <!-- Map Section -->
        <section class="map-section" id="mapSection">
            <div class="container">
                <h2 class="section-title">Explore Daanbantayan</h2>
                <div id="map"></div>
                <div class="map-controls">
                    <button class="btn btn-primary" onclick="getUserLocation()">üìç Show My Location</button>
                    <button class="btn btn-secondary" onclick="resetMapView()">üó∫Ô∏è Reset View</button>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section class="about-section" id="aboutSection">
            <div class="container">
                <div class="about-content">
                    <div class="about-text">
                        <h2>About Daanbantayan</h2>
                        <p>Daanbantayan is a pristine municipality located in the northern tip of Cebu, Philippines. Known for its stunning white sand beaches, crystal-clear waters, and world-class diving spots, it's home to the famous Malapascua Island.</p>
                        <p>Our platform connects travelers with the best accommodations, activities, and experiences that Daanbantayan has to offer. From luxury resorts to budget-friendly guesthouses, diving adventures to island hopping tours, we make it easy to plan your perfect getaway.</p>
                        <p>Experience the thresher sharks at sunrise, relax on powdery white beaches, and immerse yourself in the warm Filipino hospitality that makes Daanbantayan truly special.</p>
                    </div>
                    <div class="about-image">
                        üèùÔ∏è Beautiful Daanbantayan Landscape
                    </div>
                </div>
            </div>
        </section>

        <!-- Team Section -->
        <section class="team-section" id="teamSection">
            <div class="container">
                <h2 class="section-title">Our Team</h2>
                <div class="team-grid">
                    <div class="team-card">
                        <div class="team-avatar"><img src="img/Daisu.jpg" alt="Vincent Bernebe V. Romeo" class="team-avatar-img"></div>
                        <h3>Vincent Bernebe V. Romeo</h3>
                        <p>Developer</p>
                        </div>
                    <div class="team-card">
                        <div class="team-avatar"><img src="img/Daisu.jpg" alt="Vincent Bernebe V. Romeo" class="team-avatar-img"></div>
                        <h3>Jovannie Congson</h3>
                        <p>Operations Manager</p>
                        </div>
                    <div class="team-card">
                        <div class="team-avatar"><img src="img/Daisu.jpg" alt="Vincent Bernebe V. Romeo" class="team-avatar-img"></div>
                        <h3>Bea Delos Santos</h3>
                        <p>Tour Coordinator</p>
                        </div>
                    <div class="team-card">
                        <div class="team-avatar"><img src="img/Daisu.jpg" alt="Vincent Bernebe V. Romeo" class="team-avatar-img"></div>
                        <h3>Christine Rosalejos</h3>
                        <p>Customer Support</p>
                        </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section class="contact-section" id="contactSection">
            <div class="container">
                <h2 class="section-title">Get in Touch</h2>
                <div class="contact-content">
                    <form class="contact-form" onsubmit="handleContactForm(event)">
                        <div class="form-group">
                            <label for="contactName">Your Name</label>
                            <input type="text" id="contactName" placeholder="Your Name" required aria-required="true">
                        </div>
                        <div class="form-group">
                            <label for="contactEmail">Your Email</label>
                            <input type="email" id="contactEmail" placeholder="Your Email" required aria-required="true">
                        </div>
                        <div class="form-group">
                            <label for="contactSubject">Subject</label>
                            <input type="text" id="contactSubject" placeholder="Subject" required aria-required="true">
                        </div>
                        <div class="form-group">
                            <label for="contactMessage">Your Message</label>
                            <textarea id="contactMessage" rows="5" placeholder="Your Message" required aria-required="true"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Send Message</button>
                    </form>
                    <div class="contact-info">
                        <h3>Contact Information</h3>
                        <p><strong>Address:</strong> Brgy. Agujo, Daanbantayan, Cebu, Philippines</p>
                        <p><strong>Phone:</strong> +639945935023</p>
                        <p><strong>Email:</strong> <a href="mailto:info@daanbantayanparadise.com" style="color: #ffd700;">info@daanbantayanparadise.com</a></p>
                        <p><strong>Hours:</strong> 24/7</p>
                        <h4 style="margin-top: 2rem;">Follow Us</h4>
                        <p>
                            <a href="#" style="color: #ffd700;">Facebook</a> |
                            <a href="#" style="color: #ffd700;">Instagram</a> |
                            <a href="#" style="color: #ffd700;">Twitter</a>
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tour Guide Application Section -->
        <section class="tour-guide-section" id="tourGuideSection">
            <div class="container">
                <h2 class="section-title">Become a Tour Guide</h2>
                <div class="tour-guide-container">
                    <p>Join our team of local experts and share the beauty of Daanbantayan with travelers from around the world. Applicants must be residents of Daanbantayan, Cebu City.</p>
                    <a href="apply.html" class="btn btn-tour-guide" onclick="checkLogin()">Apply Now</a>
                </div>
            </div>
        </section>
    </main>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- Login Modal -->
    <div class="modal" id="loginModal" role="dialog" aria-labelledby="loginModalLabel">
        <div class="modal-content">
            <span class="close" onclick="closeModal('loginModal')" aria-label="Close">&times;</span>
            <h2 id="loginModalLabel">Login</h2>
            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required placeholder="Your Email" aria-required="true">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" required placeholder="Your Password" aria-required="true">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
            </form>
            <p style="text-align: center; margin-top: 1rem;">
                Don't have an account? <a href="#" onclick="closeModal('loginModal'); showRegister();" style="color: #007bbf;">Sign up</a>
                | <a href="#" onclick="showForgotPassword();" style="color: #007bbf;">Forgot Password?</a>
            </p>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div class="modal" id="forgotPasswordModal" role="dialog" aria-labelledby="forgotPasswordModalLabel">
        <div class="modal-content">
            <span class="close" onclick="closeModal('forgotPasswordModal')" aria-label="Close">&times;</span>
            <h2 id="forgotPasswordModalLabel">Forgot Password</h2>
            <form id="forgotPasswordForm" onsubmit="handleForgotPassword(event)">
                <div class="form-group">
                    <label for="forgotEmail">Email</label>
                    <input type="email" id="forgotEmail" required placeholder="Your Email" aria-required="true">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Send Reset Link</button>
            </form>
            <p style="text-align: center; margin-top: 1rem;">
                <a href="#" onclick="closeModal('forgotPasswordModal'); showLogin();" style="color: #007bbf;">Back to Login</a>
            </p>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="registerModal" role="dialog" aria-labelledby="registerModalLabel">
        <div class="modal-content">
            <span class="close" onclick="closeModal('registerModal')" aria-label="Close">&times;</span>
            <h2 id="registerModalLabel">Sign Up</h2>
            <form id="registerForm" onsubmit="handleRegister(event)">
                <div class="form-group">
                    <label for="registerName">Full Name</label>
                    <input type="text" id="registerName" required placeholder="Your Full Name" aria-required="true">
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required placeholder="Your Email" aria-required="true">
                </div>
                <div class="form-group">
                    <label for="registerPhone">Phone Number (Optional)</label>
                    <input type="tel" id="registerPhone" placeholder="+63 XXX XXX XXXX">
                </div>
                <div class="form-group">
                    <label for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" required placeholder="Your Password" aria-required="true">
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" required placeholder="Confirm Password" aria-required="true">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Sign Up</button>
            </form>
            <p style="text-align: center; margin-top: 1rem;">
                Already have an account? <a href="#" onclick="closeModal('registerModal'); showLogin();" style="color: #007bbf;">Login</a>
            </p>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script>
        // Application State
        let currentUser = null;
        let currentSection = 'home';
        let map = null;
        let userMarker = null;
        let touristMarkers = [];

        // Toast Notification Function
        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            container.appendChild(toast);
            // Trigger reflow
            toast.offsetHeight;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (container.contains(toast)) {
                        container.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }

        // Tourist Spots with Coordinates
        const touristSpots = [
            {
                id: 1,
                name: "Malapascua Island",
                lat: 11.3333,
                lng: 124.1167,
                description: "Famous for thresher shark diving and pristine white sand beaches. A world-class diving destination with crystal clear waters.",
                price: 4500,
                image: "img/resort/malapascua.jpg",
                activities: ["Diving", "Snorkeling", "Beach Activities"]
            },
            {
                id: 2,
                name: "Bantigue Cove",
                lat: 11.2800,
                lng: 124.0200,
                description: "Secluded cove with turquoise waters perfect for swimming and snorkeling. A hidden gem with stunning natural beauty.",
                price: 2800,
                image: "img/resort/bantigue.jpg",
                activities: ["Snorkeling", "Swimming", "Relaxation"]
            },
            {
                id: 3,
                name: "Carnaza Island",
                lat: 11.4167,
                lng: 124.0333,
                description: "Remote island paradise with untouched beaches and rich marine life. Perfect for adventure seekers.",
                price: 3200,
                image: "img/resort/carnaza-island-cebu-boracay.jpg",
                activities: ["Island Hopping", "Beach Activities", "Cultural Tours"]
            },
            {
                id: 4,
                name: "Paypay Beach",
                lat: 11.2600,
                lng: 124.0100,
                description: "White sand beach ideal for sunset watching and peaceful relaxation. Family-friendly destination.",
                price: 2000,
                image: "img/resort/paypay.webp",
                activities: ["Swimming", "Sunset Watching", "Beach Games"]
            },
            {
                id: 5,
                name: "Monad Shoal (Thresher Shark Diving)",
                lat: 11.3500,
                lng: 124.1300,
                description: "World-renowned dive site where you can see thresher sharks at sunrise. An unforgettable underwater experience.",
                price: 5500,
                image: "img/resort/thresher-shark.jpg",
                activities: ["Diving", "Marine Life Watching"]
            },
            {
                id: 6,
                name: "Daanbantayan Lighthouse",
                lat: 11.2517,
                lng: 123.9992,
                description: "Historic Spanish-era lighthouse offering panoramic views of the northern coastline. Cultural heritage site.",
                price: 1500,
                image: "img/resort/lighthouse.jpg",
                activities: ["Sightseeing", "Photography", "Heritage Tour"]
            }
        ];

        // Bookings
        const bookings = [
            {
                id: 1,
                title: "Malapascua Island Resort",
                description: "Luxury beachfront accommodation with diving packages and pristine white sand beaches",
                price: 4500,
                image: "img/resort/malapascua.jpg",
                location: "Malapascua Island"
            },
            {
                id: 2,
                title: "Bantigue Cove Experience",
                description: "Secluded cove with crystal clear waters perfect for snorkeling and relaxation",
                price: 2800,
                image: "img/resort/bantigue.jpg",
                location: "Bantigue Cove"
            },
            {
                id: 3,
                title: "Carnaza Island Adventure",
                description: "Island hopping with local guides, fresh seafood, and cultural experiences",
                price: 3200,
                image: "img/resort/carnaza-island-cebu-boracay.jpg",
                location: "Carnaza Island"
            },
            {
                id: 4,
                title: "Paypay Beach Getaway",
                description: "White sand beach perfect for relaxation, swimming, and sunset watching",
                price: 2000,
                image: "img/resort/paypay.webp",
                location: "Paypay Beach"
            },
            {
                id: 5,
                title: "Thresher Shark Diving",
                description: "World-famous diving experience with thresher sharks at Monad Shoal",
                price: 5500,
                image: "img/resort/thresher-shark.jpg",
                location: "Monad Shoal"
            },
            {
                id: 6,
                title: "Lighthouse Heritage Tour",
                description: "Historical lighthouse with panoramic views and cultural significance",
                price: 1500,
                image: "img/resort/lighthouse.jpg",
                location: "Daanbantayan Lighthouse"
            }
        ];

        function loadBookings(filteredBookings = bookings) {
            const bookingGrid = document.getElementById('bookingGrid');
            bookingGrid.innerHTML = filteredBookings.map(booking => `
                <div class="booking-card">
                    <div class="booking-image">
                        <img src="${booking.image}" alt="${booking.title}" onerror="this.src='img/placeholder.jpg';">
                    </div>
                    <div class="booking-content">
                        <div class="booking-title">${booking.title}</div>
                        <p class="booking-description">${booking.description}</p>
                        <div class="booking-price">‚Ç±${booking.price.toLocaleString()}/night</div>
                        <button class="btn btn-primary" onclick="selectBooking(${booking.id})" style="width: 100%;">Book Now</button>
                    </div>
                </div>
            `).join('');
        }

        // Initialize App
        document.addEventListener('DOMContentLoaded', async function() {
            // Set default dates
            const checkinDate = document.getElementById('checkin');
            const checkoutDate = document.getElementById('checkout');
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            if (checkinDate) checkinDate.valueAsDate = today;
            if (checkoutDate) checkoutDate.valueAsDate = tomorrow;

            // Check for logged-in user
            currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
            updateAuthButtons();

            // Load bookings
            loadBookings();

            // Initialize Leaflet Map
            initLeafletMap();

            // Handle hash navigation
            const hash = window.location.hash.replace('#', '');
            if (hash) {
                showSection(hash);
            }
        });

        // Initialize Leaflet Map
        function initLeafletMap() {
            try {
                // Center of Daanbantayan
                const daanbantayanCenter = [11.2517, 123.9992];
                
                // Create map
                map = L.map('map').setView(daanbantayanCenter, 11);
                
                // Add OpenStreetMap tiles
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '¬© OpenStreetMap contributors',
                    maxZoom: 18
                }).addTo(map);

                // Custom icon for tourist spots
                const touristIcon = L.divIcon({
                    className: 'custom-div-icon',
                    html: `<div style="background: linear-gradient(45deg, #007bbf, #00a8ff); width: 40px; height: 40px; border-radius: 50% 50% 50% 0; transform: rotate(-45deg); border: 3px solid white; box-shadow: 0 3px 10px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center;">
                        <span style="transform: rotate(45deg); font-size: 20px;">üìç</span>
                    </div>`,
                    iconSize: [40, 40],
                    iconAnchor: [20, 40],
                    popupAnchor: [0, -40]
                });

                // Add markers for each tourist spot
                touristSpots.forEach(spot => {
                    const marker = L.marker([spot.lat, spot.lng], { icon: touristIcon })
                        .addTo(map);
                    
                    // Create detailed popup content
                    const popupContent = `
                        <div class="popup-content">
                            <img src="${spot.image}" alt="${spot.name}" class="popup-image" onerror="this.src='img/placeholder.jpg';">
                            <div class="popup-info">
                                <div class="popup-title">${spot.name}</div>
                                <div class="popup-description">${spot.description}</div>
                                <div class="popup-price">‚Ç±${spot.price.toLocaleString()}/night</div>
                                <div style="margin-bottom: 0.8rem; font-size: 0.85rem; color: #666;">
                                    <strong>Activities:</strong> ${spot.activities.join(', ')}
                                </div>
                                <button class="popup-btn" onclick="selectBooking(${spot.id})">Book Now</button>
                            </div>
                        </div>
                    `;
                    
                    marker.bindPopup(popupContent, {
                        maxWidth: 280,
                        className: 'custom-popup'
                    });
                    
                    touristMarkers.push(marker);
                });

                // Add click event to markers
                map.on('popupopen', function(e) {
                    console.log('Popup opened');
                });

                console.log('Leaflet map initialized successfully');
            } catch (error) {
                console.error('Leaflet map init error:', error);
            }
        }

        // Get User Location
        function getUserLocation() {
            if (!navigator.geolocation) {
                showToast('Geolocation is not supported by your browser', 'error');
                return;
            }

            navigator.geolocation.getCurrentPosition(
                function(position) {
                    const userLat = position.coords.latitude;
                    const userLng = position.coords.longitude;

                    // Remove existing user marker if any
                    if (userMarker) {
                        map.removeLayer(userMarker);
                    }

                    // Create custom user location icon
                    const userIcon = L.divIcon({
                        className: 'user-location-icon',
                        html: `<div style="background: #4285f4; width: 20px; height: 20px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3);"></div>`,
                        iconSize: [20, 20],
                        iconAnchor: [10, 10]
                    });

                    // Add user marker
                    userMarker = L.marker([userLat, userLng], { icon: userIcon })
                        .addTo(map)
                        .bindPopup('<strong>You are here!</strong>')
                        .openPopup();

                    // Center map on user location
                    map.setView([userLat, userLng], 13);

                    // Add circle to show accuracy
                    L.circle([userLat, userLng], {
                        radius: position.coords.accuracy,
                        color: '#4285f4',
                        fillColor: '#4285f4',
                        fillOpacity: 0.1,
                        weight: 1
                    }).addTo(map);
                },
                function(error) {
                    let errorMessage = 'Unable to retrieve your location. ';
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            errorMessage += 'Please allow location access in your browser settings.';
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorMessage += 'Location information is unavailable.';
                            break;
                        case error.TIMEOUT:
                            errorMessage += 'Location request timed out.';
                            break;
                    }
                    showToast(errorMessage, 'error');
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 0
                }
            );
        }

        // Reset Map View
        function resetMapView() {
            const daanbantayanCenter = [11.2517, 123.9992];
            map.setView(daanbantayanCenter, 11);
            
            // Remove user marker if exists
            if (userMarker) {
                map.removeLayer(userMarker);
                userMarker = null;
            }
        }

        // Authentication Functions
        async function showLogin() {
            document.getElementById('loginModal').style.display = 'block';
        }

        async function showRegister() {
            document.getElementById('registerModal').style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        async function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                const response = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                const data = await response.json();
                if (!response.ok) throw new Error(data.error || 'Login failed');
                
                currentUser = data.user;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                localStorage.setItem('token', data.token);
                closeModal('loginModal');
                window.location.href = currentUser.role === 'admin' ? 'admin_dashboard.html' : (currentUser.role === 'tourguide' ? 'tour_guide.html' : 'user_dashboard.html');
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        async function showForgotPassword() {
            document.getElementById('forgotPasswordModal').style.display = 'block';
        }

        async function handleForgotPassword(e) {
            e.preventDefault();
            const email = document.getElementById('forgotEmail').value;

            try {
                const response = await fetch('/api/auth/forgot-password', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email })
                });
                const data = await response.json();
                if (!response.ok) throw new Error(data.error || 'Failed to send reset link');
                showToast(data.message, 'success');
                closeModal('forgotPasswordModal');
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        async function handleRegister(e) {
            e.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const phone = document.getElementById('registerPhone').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            if (password !== confirmPassword) {
                showToast('Passwords do not match!', 'error');
                return;
            }

            try {
                const response = await fetch('/api/auth/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name, email, password, phone })
                });
                const data = await response.json();
                if (!response.ok) throw new Error(data.error || 'Registration failed');

                showToast(data.message || 'Registration successful. Please check your email to verify your account.', 'success');
                closeModal('registerModal');
            } catch (error) {
                showToast(error.message, 'error');
            }
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            localStorage.removeItem('token');
            updateAuthButtons();
            showSection('home');
        }

        function updateAuthButtons() {
            const authButtons = document.getElementById('authButtons');
            if (currentUser) {
                authButtons.innerHTML = `
                    <span class="user-welcome">Welcome, ${currentUser.name}!</span>
                    <a href="${currentUser.role === 'admin' ? 'admin_dashboard.html' : (currentUser.role === 'tourguide' ? 'tour_guide.html' : 'user_dashboard.html')}" class="btn btn-secondary"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                    <button class="btn btn-primary" onclick="logout()"><i class="fas fa-sign-out-alt"></i>  Logout</button>
                `;
            } else {
                authButtons.innerHTML = `
                    <a href="#" class="btn btn-secondary" onclick="showLogin()">Login</a>
                    <a href="#" class="btn btn-primary" onclick="showRegister()">Sign Up</a>
                    <a href="apply.html" class="btn btn-tour-guide" onclick="checkLogin()">Apply as Tour Guide</a>
                `;
            }
        }

        // Navigation Functions
        function showSection(section) {
            document.getElementById('mainContent').style.display = 'block';
            currentSection = section;
            const target = document.getElementById(`${section}Section`);
            if (target) {
                target.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Booking Functions
        function searchBookings() {
            const destination = document.getElementById('destination').value.toLowerCase();
            const filteredBookings = bookings.filter(booking => 
                !destination || booking.location.toLowerCase().includes(destination)
            );
            loadBookings(filteredBookings);
            document.getElementById('bookingsSection').scrollIntoView({ behavior: 'smooth' });
        }

        function selectBooking(bookingId) {
            if (!currentUser) {
                showToast('Please login to make a booking', 'error');
                showLogin();
                return;
            }
            const selectedBooking = bookings.find(b => b.id === bookingId);
            localStorage.setItem('selectedBooking', JSON.stringify(selectedBooking));
            window.location.href = 'booking.html';
        }

        // Contact form handler
        function handleContactForm(e) {
            e.preventDefault();
            showToast('Thank you for your message! We will get back to you within 24 hours.', 'success');
            e.target.reset();
        }

        // Login Check for Apply Page
        function checkLogin() {
            if (!currentUser) {
                showToast('Please login to apply as a tour guide.', 'error');
                showLogin();
                return false;
            }
            return true;
        }

        // Smooth scrolling for navigation
        document.addEventListener('click', function(e) {
            if (e.target.matches('a[href^="#"]')) {
                e.preventDefault();
                const targetId = e.target.getAttribute('href').substring(1);
                showSection(targetId);
            }
        });

        // Navbar Scroll Effect
        window.addEventListener('scroll', function() {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 50) {
                navbar.style.background = 'rgba(0, 123, 191, 0.98)';
                navbar.style.backdropFilter = 'blur(15px)';
            } else {
                navbar.style.background = 'rgba(0, 123, 191, 0.95)';
                navbar.style.backdropFilter = 'blur(10px)';
            }
        });

        // Close modals when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
            }
        });

        // Enhanced keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal').forEach(modal => modal.style.display = 'none');
            }
        });

        // Form validation enhancement
        document.addEventListener('input', function(e) {
            if (e.target.matches('input[type="email"]')) {
                const email = e.target.value;
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                e.target.style.borderColor = email && !emailRegex.test(email) ? '#dc3545' : '#28a745';
            }
        });
    </script>
</body>
</html>